<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AI Training Data Compliance</title>

<style>
:root {
  --bg:#ffffff;
  --text:#111827;
  --muted:#6b7280;
  --primary:#1d4ed8;
  --border:#d1d5db;
  --focus:#2563eb;
}

body {
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  background:var(--bg);
  color:var(--text);
}

.app {
  display:grid;
  grid-template-columns:240px 1fr;
  min-height:100vh;
}

/* SIDEBAR */
nav {
  border-right:1px solid var(--border);
  padding:16px;
  background:#f9fafb;
}
nav h2 {
  font-size:1rem;
  margin-bottom:12px;
}
nav button {
  width:100%;
  text-align:left;
  padding:10px;
  margin-bottom:6px;
  background:none;
  border:1px solid transparent;
  border-radius:6px;
  cursor:pointer;
}
nav button:hover,
nav button:focus-visible {
  border-color:var(--primary);
  outline:none;
}

/* MAIN */
main {
  padding:32px;
}

.hidden { display:none; }

h1 { margin-top:0; }

.card {
  border:1px solid var(--border);
  border-radius:8px;
  padding:16px;
  margin-bottom:24px;
}

table {
  width:100%;
  border-collapse:collapse;
  font-size:0.9rem;
}
th, td {
  border:1px solid var(--border);
  padding:8px;
  text-align:left;
}

label.option {
  display:flex;
  gap:12px;
  padding:12px;
  border:1px solid var(--border);
  border-radius:6px;
  margin-bottom:12px;
  cursor:pointer;
}

.actions {
  display:flex;
  gap:12px;
}

button.primary {
  background:var(--primary);
  color:white;
  border:none;
  padding:10px 16px;
  border-radius:6px;
}

button.secondary {
  background:none;
  border:1px solid var(--border);
  padding:10px 16px;
  border-radius:6px;
}
</style>
</head>

<body>
<div class="app">

<!-- SIDEBAR -->
<nav>
  <h2>Compliance Tool</h2>
  <button onclick="show('report')">üìù Report issue</button>
  <button onclick="show('audit')">üìú Audit log</button>
  <button onclick="show('legal')">‚öñÔ∏è Legal review queue</button>
  <button onclick="exportCSV()">‚¨áÔ∏è Export CSV</button>
</nav>

<!-- MAIN -->
<main>

<!-- REPORT -->
<section id="report">
  <h1>Flag training data issue</h1>

  <div class="card">
    <strong>Dataset:</strong> customer_uploads_q3.xlsx<br>
    <strong>Row:</strong> 417
  </div>

  <label class="option"><input type="radio" name="issue" value="Licensing unclear"> Licensing unclear</label>
  <label class="option"><input type="radio" name="issue" value="Personal data"> Personal or sensitive data</label>
  <label class="option"><input type="radio" name="issue" value="Source unverifiable"> Source unverifiable</label>
  <label class="option"><input type="radio" name="issue" value="Copyrighted"> Copyrighted material</label>

  <div class="actions">
    <button class="primary" onclick="submit()">Submit</button>
  </div>
</section>

<!-- AUDIT LOG -->
<section id="audit" class="hidden">
  <h1>Audit log</h1>
  <table>
    <thead>
      <tr><th>Time</th><th>Dataset</th><th>Row</th><th>Issue</th><th>Status</th></tr>
    </thead>
    <tbody id="auditRows"></tbody>
  </table>
</section>

<!-- LEGAL QUEUE -->
<section id="legal" class="hidden">
  <h1>Legal review queue</h1>
  <table>
    <thead>
      <tr><th>Dataset</th><th>Row</th><th>Issue</th><th>Status</th></tr>
    </thead>
    <tbody id="legalRows"></tbody>
  </table>
</section>

</main>
</div>

<script>
let audits = JSON.parse(localStorage.getItem("audits") || "[]");

function show(id) {
  ["report","audit","legal"].forEach(s=>{
    document.getElementById(s).classList.toggle("hidden", s!==id);
  });
  if (id==="audit") renderAudit();
  if (id==="legal") renderLegal();
}

function submit() {
  const selected = document.querySelector('input[name="issue"]:checked');
  if (!selected) return alert("Select an issue");

  audits.push({
    time:new Date().toLocaleString(),
    dataset:"customer_uploads_q3.xlsx",
    row:417,
    issue:selected.value,
    status:"Pending legal review"
  });

  localStorage.setItem("audits", JSON.stringify(audits));
  alert("Issue logged");
}

function renderAudit() {
  const tbody = document.getElementById("auditRows");
  tbody.innerHTML="";
  audits.forEach(a=>{
    tbody.innerHTML += `<tr>
      <td>${a.time}</td>
      <td>${a.dataset}</td>
      <td>${a.row}</td>
      <td>${a.issue}</td>
      <td>${a.status}</td>
    </tr>`;
  });
}

function renderLegal() {
  const tbody = document.getElementById("legalRows");
  tbody.innerHTML="";
  audits.forEach(a=>{
    tbody.innerHTML += `<tr>
      <td>${a.dataset}</td>
      <td>${a.row}</td>
      <td>${a.issue}</td>
      <td>${a.status}</td>
    </tr>`;
  });
}

function exportCSV() {
  let csv = "Time,Dataset,Row,Issue,Status\n";
  audits.forEach(a=>{
    csv += `"${a.time}","${a.dataset}",${a.row},"${a.issue}","${a.status}"\n`;
  });
  const blob = new Blob([csv], {type:"text/csv"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "audit_log.csv";
  a.click();
}
</script>
</body>
</html>
